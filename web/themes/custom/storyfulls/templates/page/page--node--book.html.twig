{#
/**
 * @file
 * Template for Book Detail Pages.
 */
#}
{{ attach_library('storyfulls/global-styling') }}
<!DOCTYPE html>
<html{{ html_attributes }}>
  <head>
    <head-placeholder token="{{ placeholder_token }}">
    <title>{{ head_title|safe_join(' | ') }}</title>
    <css-placeholder token="{{ placeholder_token }}">
    <js-placeholder token="{{ placeholder_token }}">
  </head>
  <body{{ attributes }}>
    <a href="#main-content" class="visually-hidden focusable">
      {{ 'Skip to main content'|t }}
    </a>
    
    {# Header #}
    <header class="site-header site-header--internal">
      {# Wavy pattern behind nav #}
      <div class="header-wave"></div>

      {# Top Navigation #}
      <div class="header-top">
        {# Logo #}
        <div class="site-logo">
          <a href="{{ path('<front>') }}">
            <img src="{{ base_path ~ directory }}/images/storyfulls-logo.png" alt="{{ site_name }}">
          </a>
        </div>

        {# Main Navigation #}
        <nav class="main-nav">
          <ul class="main-navigation">
            <li><a href="{{ path('<front>') }}">Home</a></li>
            <li><a href="/books">Books</a></li>
            <li><a href="/blogs">Blogs</a></li>
            <li><a href="/our-readers">Our Readers</a></li>
            {% if logged_in and is_admin %}
              <li><a href="/admin/dashboard">Dashboard</a></li>
            {% endif %}
            {% if logged_in %}
              <li class="user-menu-item">
                <a href="#" class="user-menu-toggle">
                  <span class="user-greeting">Profile</span>
                  <svg class="dropdown-icon" width="12" height="8" viewBox="0 0 12 8" fill="none">
                    <path d="M1 1L6 6L11 1" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  </svg>
                </a>
                <ul class="user-dropdown">
                  <li><a href="/user">View Profile</a></li>
                  <li><a href="/user/{{ user_id }}/wishlist">My Wishlist</a></li>
                  <li><a href="/user/{{ user_id }}/edit">Update Profile</a></li>
                  <li class="dropdown-divider"></li>
                  <li class="logout-item"><a href="/user/logout">Logout</a></li>
                </ul>
              </li>
            {% else %}
              <li><a href="/user/login">Login</a></li>
            {% endif %}
          </ul>
        </nav>
      </div>
    </header>

    {# Main Content #}
    <main id="main-content" class="book-detail-main">
      <div class="container">
        {{ page.content }}
      </div>
    </main>

    {# Footer #}
    {% if page.footer %}
      <footer>
        {{ page.footer }}
      </footer>
    {% endif %}

    <js-bottom-placeholder token="{{ placeholder_token }}">
    
    {# Share functionality #}
    <script>
      function shareBook() {
        if (navigator.share) {
          navigator.share({
            title: document.title,
            text: 'Check out this book on Storyfulls!',
            url: window.location.href
          }).catch(err => console.log('Error sharing:', err));
        } else {
          // Fallback: copy to clipboard
          navigator.clipboard.writeText(window.location.href).then(() => {
            alert('Link copied to clipboard!');
          });
        }
      }
    </script>
  </body>
</html>
