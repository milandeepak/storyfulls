{#
/**
 * @file
 * Edit Favorite Genres Template
 */
#}
<div class="edit-favorites-page">
  <main class="edit-favorites-main">
    <div class="edit-favorites-container">
      
      {# Page Header #}
      <div class="edit-favorites-header">
        <div class="header-icon">
          <img src="/themes/custom/storyfulls/images/sideimageforfavoritegenre.png" alt="Genres Icon" class="page-icon">
        </div>
        <h1 class="edit-favorites-title">Edit Favourite Genres</h1>
        <p class="edit-favorites-subtitle">Select your favourite book genres. Choose as many as you like!</p>
      </div>

      {# Edit Form #}
      <form method="post" class="edit-favorites-form" id="editGenresForm">
        
        {# Genres Grid #}
        <div class="favorites-list-section">
          <div class="genres-grid">
            
            {% if all_genres %}
              {% for genre in all_genres %}
                {% set is_checked = false %}
                {% for fav in favorite_genres %}
                  {% if fav.id == genre.id %}
                    {% set is_checked = true %}
                  {% endif %}
                {% endfor %}
                
                <label class="genre-checkbox-card {% if is_checked %}selected{% endif %}">
                  <input 
                    type="checkbox" 
                    name="genres[]" 
                    value="{{ genre.id }}" 
                    {% if is_checked %}checked{% endif %}
                  >
                  <span class="genre-label">{{ genre.name }}</span>
                  <span class="checkmark">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                      <path d="M16 6L8 14L4 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </span>
                </label>
              {% endfor %}
            {% else %}
              <p class="no-genres">No genres available. Please contact an administrator.</p>
            {% endif %}
            
          </div>
          
          <p class="favorites-hint">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z" stroke="#4DD0E1" stroke-width="2"/>
              <path d="M8 5V8M8 11H8.01" stroke="#4DD0E1" stroke-width="2" stroke-linecap="round"/>
            </svg>
            Select all the genres you enjoy reading. This helps us recommend books you'll love!
          </p>
        </div>

        {# Form Actions #}
        <div class="form-actions">
          <a href="/user" class="btn btn-cancel">Cancel</a>
          <button type="submit" class="btn btn-save">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
              <path d="M15 5L7 13L3 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>Save Changes</span>
          </button>
        </div>

      </form>

    </div>
  </main>
</div>
